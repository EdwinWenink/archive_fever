_id: 23729e20-7b13-11e9-9871-2542bee5708c
_parent: 30-recommender_hackaton
name: Edwin
reply_to: 3968ded0-7aee-11e9-9871-2542bee5708c
body: "Thanks for your response! The function names are read out from a database with the clicking behaviour of people. They were recorded per clicking action, so in order to make them available for ML some preprocessing was needed. The algorithm only deals with numeric values and no strings, so we need to index the function names:\r\n\r\n```\r\nval indexer = new StringIndexer()\r\n  .setInputCol(\"function_name\")\r\n  .setOutputCol(\"function_index\")\r\n  .setHandleInvalid(\"skip\")\r\n\r\n// Fit the indexer\r\nval stringIndexerModel = indexer.fit(clicks_train)\r\n```\r\nAnd then we need to train the model on the click information aggregrated over functions per candidate:\r\n\r\n```\r\n\r\n// By transforming the stringindexer we get a new column 'function_index'\r\nval clicks_train_indexed = stringIndexerModel.transform(clicks_train)\r\nval clicks_val_indexed = stringIndexerModel.transform(clicks_val)\r\n\r\nval grouped_train = clicks_train_indexed.groupBy(\"candidate_number\", \"function_index\").agg(sum(\"action\").alias(\"rating\"))\r\n```"
date: 1558365775
